<!DOCTYPE html>

<html>

   <head>

      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

      <script>
            $(function(){
                $("#graph_inputs").submit(function(event) {
                    event.preventDefault();
                    event.stopPropagation();
                    fetch('/user_input', {
                        method: 'post',
                        body: new FormData(document.getElementById('input-form'))
                    }).then(function(response) {
                        return response.json()
                    }).then(function(j){
                        canvas = document.getElementById('myCanvas')
                        ctx = canvas.getContext("2d")
                        // set canvas height and width
                        canvas.width=800
                        canvas.height=400
                        canvas.style.width=800
                        canvas.style.height=400
                        // clear the canvas for a redrawing
                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                        ctx.font = '50px serif';
                        ctx.strokeText(j.message, 200, 100)
                    });
                    return false;
                });
            });
        </script>

       <script>

            function add_input(id) {

               var entry = document.getElementById(id);

               if (entry.id === "num_species") {

                  for (i = 1; i <= entry.value; ++i) {

                     var input = document.createElement("input");

                     var label = document.createElement("Label");
                     label.innerHTML = "<br> Number of vertices of Species " + i + "<br>";

                     input.setAttribute("type", "text");
                     input.setAttribute("value", "");
                     input.setAttribute("name", "num_vert");
                     input.setAttribute("style", "width:200px");

                     label.setAttribute("style", "font-weight:normal");

                     var num_vert = document.getElementById("num_vert");

                     num_vert.appendChild(label);
                     num_vert.appendChild(input);

                  }

               }

               if(entry.id === "center_custom") {

                  var radio = document.getElementsByName("graph_dimension");

                  var dimension = 0;
                  
                  for (i = 0; i < radio.length; ++i) {
                     if (radio[i].checked) {
                        dimension = radio[i].value;
                     }
                  }

                  for (i = 0; i < dimension; ++i) {

                     var input = document.createElement("input");

                     var label = document.createElement("Label");
                     label.innerHTML = "<br>";


                     input.setAttribute("type", "text");
                     input.setAttribute("value", "");
                     input.setAttribute("name", "coords");
                     input.setAttribute("style", "width:200px");

                     var coords = document.getElementById("coords");

                     coords.appendChild(label);
                     coords.appendChild(input);


                  }

               }

            }

       </script>

   </head>

   <body>

      <canvas width = "450" height = "450" id = "webgl_canvas"></canvas>

      <form id="graph_inputs">

         Number of Species:<br>
         <input type="text" name="num_species" id="num_species">
         <input type="button" value="set" onclick="add_input('num_species')" /><br>
         <div id="num_vert"></div><br>

         Number of Dimensions:<br>
         <input type="radio" name="graph_dimension" id="graph_dimension_2D" value="2"> 2 <br>
         <input type="radio" name="graph_dimension" id="graph_dimension_3D" value="3"> 3 <br>

         Center:<br>
         <input type="radio" name="graph_center" id="center_origin" value="origin"> Origin <br>
         <input type="radio" name="graph_center" id="center_custom" value="custom" onclick="add_input('center_custom')"> Custom <br>
         <div id="coords"></div><br>

         Radius:<br>
         <input type="text" name="graph_radius"><br>

         Type:<br>
         <input type="text" name="graph_type"><br>

         Layout:<br>
         <input type="text" name="layout"><br>

         <input type="submit" value="Submit">
         <input type="reset" value="Reset" name="reset"><br>


      </form>

   </body>

</html>